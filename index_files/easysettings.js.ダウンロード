class EasySettings {
  constructor(...args) {
    this.init(...args);
  }

  init() {
    this.items = [

{
  key: "songSelectingSpeed",
  title: () => strings.songSelectingSpeed,
  info: "æ›²é¸æŠé€Ÿåº¦ã‚’å…¥åŠ›ã—ã¦ã­ï¼\n0 = é«˜é€Ÿ\n400 = åˆæœŸå€¤\n800 = ã‚†ã£ãã‚Š\nå¤‰ãˆã™ãã‚‹ã¨å›ºã¾ã‚Šã¾ã™æ³¨æ„ã—ã¦ãã ã•ã„ã€‚",
  empty: 400,
  reload: true,
},
{
  key: "baisoku",
  title: () => "â­ï¸" + strings.baisoku,
  info: "ã°ã„ãã(HS)ã®å€ç‡ã‚’å…¥åŠ›ã—ã¦ã­ï¼\n2 = ã°ã„ãã\n3 = ã•ã„ã°ã„\n4 = ã‚ˆã‚“ã°ã„\n1ã§ã¯ãªã„å ´åˆã€ã‚¹ã‚³ã‚¢ã¯ä¿å­˜ã•ã‚Œã¾ã›ã‚“ã€‚",
  empty: 1,
  reload: false,
},
{
  key: "doron",
  title: () => "â­ï¸" + strings.doron,
  info: "ãƒ‰ãƒ­ãƒ³ã‚’æœ‰åŠ¹ã«ã™ã‚‹ã«ã¯\"1\"ã‚’å…¥åŠ›ã—ã¦ã­ï¼\n0ã¾ãŸã¯ç©ºæ–‡å­—ã§ãƒªã‚»ãƒƒãƒˆã§ãã¾ã™ï¼",
  empty: 0,
  reload: false,
},
{
  key: "abekobe",
  title: () => "â­ï¸" + strings.abekobe,
  info: "ã‚ã¹ã“ã¹ã‚’æœ‰åŠ¹ã«ã™ã‚‹ã«ã¯\"1\"ã‚’å…¥åŠ›ã—ã¦ã­ï¼\n0ã¾ãŸã¯ç©ºæ–‡å­—ã§ãƒªã‚»ãƒƒãƒˆã§ãã¾ã™ï¼",
  empty: 0,
  reload: false,
},
{
  key: "detarame",
  title: () => "â­ï¸" + strings.detarame,
  info: "ã§ãŸã‚‰ã‚ã«ãªã‚‹ç¢ºç‡ã‚’ãƒ‘ãƒ¼ã‚»ãƒ³ãƒˆã§å…¥åŠ›ã—ã¦ã­ï¼(0ã€œ100)\n20 = ãã¾ãã‚Œ\n50 = ã§ãŸã‚‰ã‚",
  empty: 0,
  reload: false,
},
{
  key: "titleSort",
  title: () => strings.titlesort,
  info: "ã‚¿ã‚¤ãƒˆãƒ«é †ã§ä¸¦ã¹æ›¿ãˆã™ã‚‹ã«ã¯\"1\"ã‚’å…¥åŠ›ã—ã¦ã­ï¼\n0ã‹ç©ºæ–‡å­—ã§ãƒªã‚»ãƒƒãƒˆã§ãã¾ã™ã€‚",
  empty: 0,
  reload: true,
},

];
  }

  asSongItems(skin) {
    return this.items.map((item) => {
      return {
        title: item.title(),
        skin,
        action: item.key,
      };
    });
  }

  keys() {
    return this.items.map((i) => i.key);
  }

  first(key) {
    return this.items.find((i) => i.key === key);
  }

  get(key) {
    const keyLower = key.toLowerCase();
    const value =  window.localStorage.getItem(keyLower);
    return value !== null ? parseFloat(value, 10) : this.first(key).empty;
  }

  set(key, value) {
    const keyLower = key.toLowerCase();
    window.localStorage.setItem(keyLower, value.toString());
  }

  launchEditor(key) {
    if (!window.confirm(`${this.first(key).title()} ã‚’ç·¨é›†ã—ã‚ˆã†ã¨ã—ã¦ã„ã¾ã™ğŸŒ²`)) {
      return;
    }

    const from = this.get(key).toString();

    var to = window.prompt(this.first(key).info, from);

    if (to === null) {
      // ã‚­ãƒ£ãƒ³ã‚»ãƒ«
      return;
    } else if (to === "") {
      // ç©ºæ–‡å­—ã§ãƒªã‚»ãƒƒãƒˆ
      to = this.first(key).empty.toString();
    }

    if (from === to) {
      // å¤‰æ›´ãªã—
      return;
    }

    this.set(key, to);
    window.alert("æ­£å¸¸ã«å¤‰æ›´ã§ãã¾ã—ãŸâœ¨");

    if (this.first(key).reload) {
      window.alert("è¨­å®šã‚’åæ˜ ã™ã‚‹ãŸã‚ã«ãƒªãƒ­ãƒ¼ãƒ‰ã‚’é–‹å§‹ã—ã¾ã™ã€‚");
      window.location.reload();
    }
  }
}
